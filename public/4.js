(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{11:function(e,t,a){"use strict";var i=a(17),r=a.n(i),l={data:function(){return{categories:[],simplemde:"",headers:{"X-CSRF-TOKEN":window.Laravel.csrfToken,"X-Requested-With":"XMLHttpRequest"},selected:void 0}},props:{article:{type:Object,default:function(){return{title:"",cover:""}}}},mounted:function(){this.simplemde=new r.a({element:document.querySelector("#editor"),placeholder:"请使用 Markdown 格式书写 ;-)，代码片段黏贴时请注意使用高亮语法。",spellChecker:!1,autoDownloadFontAwesome:!1,autosave:{enabled:!0,uniqueId:"vuejs-essential"},renderingConfig:{codeSyntaxHighlighting:!0}})},created:function(){this.loadCategories()},watch:{article:function(){this.selected=this.article.category,this.simplemde.value(this.article.content)},selected:function(e){console.log(e)}},methods:{loadCategories:function(){var e=this;this.$http.get("categories").then(function(t){e.categories=t.data.data})},onSubmit:function(){var e=this;if(this.article.content=this.simplemde.value(),this.selected&&(this.article.category_id=this.selected.id),this.article.title&&this.article.content&&this.article.cover&&this.article.category_id){var t="articles"+(this.article.id?"/"+this.article.id:"");this.$http.post(t,this.article).then(function(t){e.$message({message:"操作成功",type:"success"}),e.$router.push({name:"dashboard.article"})})}else this.$message.error("请完善表单")},handleAvatarSuccess:function(e,t){this.article.cover=e.path},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,i=e.size/1024/1024<2;return t||a||this.$message.error("上传头像图片只能是 JPG PNG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&i}}},s=(a(19),a(0)),n=Object(s.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("创建文章")])]),e._v(" "),a("el-form",{ref:"article",attrs:{model:e.article,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:e.article.title,callback:function(t){e.$set(e.article,"title",t)},expression:"article.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{"value-key":"id",placeholder:"分类"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.categories,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"封面"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{multiple:!1,action:"/api/images",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.article.cover?a("img",{staticClass:"avatar",attrs:{src:e.article.cover}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"内容"}},[a("textarea",{attrs:{id:"editor"}})]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(this.$route.params.id?"修改":"立即创建"))]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)],1)],1)},[],!1,null,null,null);t.a=n.exports},19:function(e,t,a){"use strict";var i=a(6);a.n(i).a},20:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,"\n.avatar-uploader .el-upload {\n    border: 1px solid #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n}\n.avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n}\n.avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n}\n",""])},23:function(e,t){},6:function(e,t,a){var i=a(20);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(4)(i,r);i.locals&&(e.exports=i.locals)},63:function(e,t,a){"use strict";a.r(t);var i={components:{ArticleForm:a(11).a},data:function(){return{article:{}}},created:function(){var e=this;this.$http.get("articles/"+this.$route.params.id+"/edit?include=category").then(function(t){e.article=t.data})}},r=a(0),l=Object(r.a)(i,function(){var e=this.$createElement;return(this._self._c||e)("article-form",{attrs:{article:this.article}})},[],!1,null,null,null);t.default=l.exports}}]);